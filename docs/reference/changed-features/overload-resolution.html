<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Changes in Overload Resolution</title><link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico"></link><script type="text/javascript" src="../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div><div class="projectVersion">3.0.0-M2</div></span></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.docs/reference/changed-features/overload-resolution.md////PointingToDeclaration//-624007177">
    <div class="breadcrumbs"><a href="../../index.html"></a>/<a href="../../Reference/index.html">Reference</a>/<a href="../../Other Changed Features/index.html">Other Changed Features</a>/<a href="overload-resolution.html">Changes in Overload Resolution</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>"Changes in Overload Resolution"</h1> 
     <div class="byline"> <a href="https://github.com/lampepfl/dotty/edit/master/docs/docs/reference/changed-features/overload-resolution.md#L"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <p>Overload resolution in Dotty improves on Scala 2 in two ways. First, it takes all argument lists into account instead of just the first argument list. Second, it can infer parameter types of function values even if they are in the first argument list.</p> 
    <h2><a href="#looking-beyond-the-first-argument-list" id="looking-beyond-the-first-argument-list" class="anchor"></a>Looking Beyond the First Argument List</h2> 
    <p>Overloading resolution now can take argument lists into account when choosing among a set of overloaded alternatives. For example, the following code compiles in Dotty, while it results in an ambiguous overload error in Scala2:</p> 
    <pre><code class="language-scala">def f(x: Int)(y: String): Int = 0
def f(x: Int)(y: Int): Int = 0

f(3)("")     // ok
</code></pre> 
    <p>The following code compiles as well:</p> 
    <pre><code class="language-scala">def g(x: Int)(y: Int)(z: Int): Int = 0
def g(x: Int)(y: Int)(z: String): Int = 0

g(2)(3)(4)     // ok
g(2)(3)("")    // ok
</code></pre> 
    <p>To make this work, the rules for overloading resolution in section 6.23.3 of the SLS are augmented as follows:</p> 
    <blockquote> 
     <p>In a situation where a function is applied to more than one argument list, if overloading resolution yields several competing alternatives when <code>n &gt;= 1</code> parameter lists are taken into account, then resolution re-tried using <code>n + 1</code> argument lists.</p> 
    </blockquote> 
    <p>This change is motivated by the new language feature <a href="../contextual/extension-methods.md">extension methods</a>, where emerges the need to do overload resolution based on additional argument blocks.</p> 
    <h2><a href="#parameter-types-of-function-values" id="parameter-types-of-function-values" class="anchor"></a>Parameter Types of Function Values</h2> 
    <p>The handling of function values with missing parameter types has been improved. We can now pass such values in the first argument list of an overloaded application, provided that the remaining parameters suffice for picking a variant of the overloaded function. For example, the following code compiles in Dotty, while it results in an missing parameter type error in Scala2:</p> 
    <pre><code class="language-scala">def f(x: Int, f2: Int =&gt; Int) = f2(x)
def f(x: String, f2: String =&gt; String) = f2(x)
f("a", _.toUpperCase)
f(2, _ * 2)
</code></pre> 
    <p>To make this work, the rules for overloading resolution in section 6.23.3 of the SLS are modified as follows:</p> 
    <p>Replace the sentence</p> 
    <blockquote> 
     <p>Otherwise, let <code>S1,…,Sm</code> be the vector of types obtained by typing each argument with an undefined expected type.</p> 
    </blockquote> 
    <p>with the following paragraph:</p> 
    <blockquote> 
     <p>Otherwise, let <code>S1,…,Sm</code> be the vector of known types of all argument types, where the <em>known type</em> of an argument <code>E</code> is determined as followed:</p> 
    </blockquote> 
    <ul> 
     <li>If <code>E</code> is a function value <code>(p_1, ..., p_n) =&gt; B</code> that misses some parameter types, the known type of <code>E</code> is <code>(S_1, ..., S_n) =&gt; ?</code>, where each <code>S_i</code> is the type of parameter <code>p_i</code> if it is given, or <code>?</code> otherwise. Here <code>?</code> stands for a <em>wildcard type</em> that is compatible with every other type.</li> 
     <li>Otherwise the known type of <code>E</code> is the result of typing <code>E</code> with an undefined expected type.</li> 
    </ul> 
    <p>A pattern matching closure</p> 
    <pre><code class="language-scala">{ case P1 =&gt; B1 ... case P_n =&gt; B_n }
</code></pre> 
    <p>is treated as if it was expanded to the function value</p> 
    <pre><code class="language-scala">x =&gt; x match { case P1 =&gt; B1 ... case P_n =&gt; B_n }
</code></pre> 
    <p>and is therefore also approximated with a <code>? =&gt; ?</code> type.</p> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../../scripts/pages.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>
