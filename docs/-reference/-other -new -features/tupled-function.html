<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Tupled Function</title><script type="text/javascript" src="../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.docs/reference/other-new-features/tupled-function.md////PointingToDeclaration//-1025483213">
    <div class="breadcrumbs"><a href="../../index.html"></a>/<a href="../../Reference/index.html">Reference</a>/<a href="index.html">Other New Features</a>/<a href="../-other -new -features/tupled-function.html">Tupled Function</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>"Tupled Function"</h1> 
     <div class="byline"> <a href="/edit/master//"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <h2>Tupled Function</h2> 
    <p>With functions bounded to arities up to 22 it was possible to generalize some operation on all function types using overloading. Now that we have functions and tuples generalized to <a href="../dropped-features/limit22.md">arities above 22</a> overloading is not an option anymore. The type class <code>TupleFunction</code> provides a way to abstract directly over a function of any arity converting it to an equivalent function that receives all arguments in a single tuple.</p> 
    <pre><code class="language-scala">/** Type class relating a `FunctionN[..., R]` with an equivalent tupled function `Function1[TupleN[...], R]`
 *
 *  @tparam F a function type
 *  @tparam G a tupled function type (function of arity 1 receiving a tuple as argument)
 */
@implicitNotFound("${F} cannot be tupled as ${G}")
sealed trait TupledFunction[F, G] {
  def tupled(f: F): G
  def untupled(g: G): F
}
</code></pre> 
    <p>The compiler will synthesize an instance of <code>TupledFunction[F, G]</code> if:</p> 
    <ul> 
     <li><code>F</code> is a function type of arity <code>N</code></li> 
     <li><code>G</code> is a function with a single tuple argument of size <code>N</code> and its types are equal to the arguments of <code>F</code></li> 
     <li>The return type of <code>F</code> is equal to the return type of <code>G</code></li> 
     <li><code>F</code> and <code>G</code> are the same sort of function (both are <code>(...) =&gt; R</code> or both are <code>(...) ?=&gt; R</code>)</li> 
     <li>If only one of <code>F</code> or <code>G</code> is instantiated the second one is inferred.</li> 
    </ul> 
    <h2>Examples</h2> 
    <p><code>TupledFunction</code> can be used to generalize the <code>Function1.tupled</code>, ... <code>Function22.tupled</code> methods to functions of any arities. The following defines <code>tupled</code> as <a href="../contextual/extension-methods.html">extension method</a> (<a href="https://github.com/lampepfl/dotty/blob/master/tests/run/tupled-function-tupled.scala">full example</a>).</p> 
    <pre><code class="language-scala">/** Creates a tupled version of this function: instead of N arguments,
 *  it accepts a single [[scala.Tuple]] with N elements as argument.
 *
 *  @tparam F the function type
 *  @tparam Args the tuple type with the same types as the function arguments of F
 *  @tparam R the return type of F
 */
extension [F, Args &lt;: Tuple, R](f: F)
  def tupled(using tf: TupledFunction[F, Args =&gt; R]): Args =&gt; R = tf.tupled(f)
</code></pre> 
    <p><code>TupledFunction</code> can be used to generalize the <code>Function.untupled</code> to a function of any arities (<a href="https://github.com/lampepfl/dotty/blob/master/tests/run/tupled-function-untupled.scala">full example</a>)</p> 
    <pre><code class="language-scala">/** Creates an untupled version of this function: instead of a single argument of type [[scala.Tuple]] with N elements,
 *  it accepts N arguments.
 *
 *  This is a generalization of [[scala.Function.untupled]] that work on functions of any arity
 *
 *  @tparam F the function type
 *  @tparam Args the tuple type with the same types as the function arguments of F
 *  @tparam R the return type of F
 */
extension [F, Args &lt;: Tuple, R](f: Args =&gt; R)
  def untupled(using tf: TupledFunction[F, Args =&gt; R]): F = tf.untupled(f)
</code></pre> 
    <p><code>TupledFunction</code> can also be used to generalize the <a href="https://github.com/lampepfl/dotty/blob/master/tests/run/tupled-function-compose.scala"><code>Tuple1.compose</code></a> and <a href="https://github.com/lampepfl/dotty/blob/master/tests/run/tupled-function-andThen.scala"><code>Tuple1.andThen</code></a> methods to compose functions of larger arities and with functions that return tuples.</p> 
    <pre><code class="language-scala">/** Composes two instances of TupledFunction into a new TupledFunction, with this function applied last.
 *
 *  @tparam F a function type
 *  @tparam G a function type
 *  @tparam FArgs the tuple type with the same types as the function arguments of F and return type of G
 *  @tparam GArgs the tuple type with the same types as the function arguments of G
 *  @tparam R the return type of F
 */
extension [F, G, FArgs &lt;: Tuple, GArgs &lt;: Tuple, R](f: F)
  def compose(g: G)(using tg: TupledFunction[G, GArgs =&gt; FArgs], tf: TupledFunction[F, FArgs =&gt; R]): GArgs =&gt; R = {
  (x: GArgs) =&gt; tf.tupled(f)(tg.tupled(g)(x))
}
</code></pre> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span><span class="pull-right">Generated by&nbsp;<a href="https://github.com/lampepfl/scala3doc">Scala3doc</a></span></footer></div></div><script type="text/javascript" src="../../../scripts/pages.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>
