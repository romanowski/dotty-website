<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Using Clauses</title><script type="text/javascript" src="../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.docs/reference/contextual/using-clauses.md////PointingToDeclaration//-1542669386">
    <div class="breadcrumbs"><a href="../../index.html"></a>/<a href="../../Reference/index.html">Reference</a>/<a href="index.html">Contextual Abstractions</a>/<a href="../-contextual -abstractions/using-clauses.html">Using Clauses</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>"Using Clauses"</h1> 
     <div class="byline"> <a href="/edit/master//"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <p>Functional programming tends to express most dependencies as simple function parameterization. This is clean and powerful, but it sometimes leads to functions that take many parameters where the same value is passed over and over again in long call chains to many functions. Context parameters can help here since they enable the compiler to synthesize repetitive arguments instead of the programmer having to write them explicitly.</p> 
    <p>For example, with the <a href="./givens.md">given instances</a> defined previously, a maximum function that works for any arguments for which an ordering exists can be defined as follows:</p> 
    <pre><code class="language-scala">def max[T](x: T, y: T)(using ord: Ord[T]): T =
  if ord.compare(x, y) &lt; 0 then y else x
</code></pre> 
    <p>Here, <code>ord</code> is a <em>context parameter</em> introduced with a <code>using</code> clause. The <code>max</code> method can be applied as follows:</p> 
    <pre><code class="language-scala">max(2, 3)(using intOrd)
</code></pre> 
    <p>The <code>(using intOrd)</code> part passes <code>intOrd</code> as an argument for the <code>ord</code> parameter. But the point of context parameters is that this argument can also be left out (and it usually is). So the following applications are equally valid:</p> 
    <pre><code class="language-scala">max(2, 3)
max(List(1, 2, 3), Nil)
</code></pre> 
    <h2>Anonymous Context Parameters</h2> 
    <p>In many situations, the name of a context parameter need not be mentioned explicitly at all, since it is used only in synthesized arguments for other context parameters. In that case one can avoid defining a parameter name and just provide its type. Example:</p> 
    <pre><code class="language-scala">def maximum[T](xs: List[T])(using Ord[T]): T =
  xs.reduceLeft(max)
</code></pre> 
    <p><code>maximum</code> takes a context parameter of type <code>Ord</code> only to pass it on as an inferred argument to <code>max</code>. The name of the parameter is left out.</p> 
    <p>Generally, context parameters may be defined either as a full parameter list <code>(p_1: T_1, ..., p_n: T_n)</code> or just as a sequence of types <code>T_1, ..., T_n</code>. Vararg parameters are not supported in using clauses.</p> 
    <h2>Inferring Complex Arguments</h2> 
    <p>Here are two other methods that have a context parameter of type <code>Ord[T]</code>:</p> 
    <pre><code class="language-scala">def descending[T](using asc: Ord[T]): Ord[T] = new Ord[T] {
  def compare(x: T, y: T) = asc.compare(y, x)
}

def minimum[T](xs: List[T])(using Ord[T]) =
  maximum(xs)(using descending)
</code></pre> 
    <p>The <code>minimum</code> method's right hand side passes <code>descending</code> as an explicit argument to <code>maximum(xs)</code>. With this setup, the following calls are all well-formed, and they all normalize to the last one:</p> 
    <pre><code class="language-scala">minimum(xs)
maximum(xs)(using descending)
maximum(xs)(using descending(using listOrd))
maximum(xs)(using descending(using listOrd(using intOrd)))
</code></pre> 
    <h2>Multiple Using Clauses</h2> 
    <p>There can be several using clauses in a definition and using clauses can be freely mixed with normal parameter clauses. Example:</p> 
    <pre><code class="language-scala">def f(u: Universe)(using ctx: u.Context)(using s: ctx.Symbol, k: ctx.Kind) = ...
</code></pre> 
    <p>Multiple using clauses are matched left-to-right in applications. Example:</p> 
    <pre><code class="language-scala">object global extends Universe { type Context = ... }
given ctx  as global.Context { type Symbol = ...; type Kind = ... }
given sym  as ctx.Symbol
given kind as ctx.Kind
</code></pre> 
    <p>Then the following calls are all valid (and normalize to the last one)</p> 
    <pre><code class="language-scala">f(global)
f(global)(using ctx)
f(global)(using ctx)(using sym, kind)
</code></pre> 
    <p>But <code>f(global)(using sym, kind)</code> would give a type error.</p> 
    <h2>Summoning Instances</h2> 
    <p>The method <code>summon</code> in <code>Predef</code> returns the given of a specific type. For example, the given instance for <code>Ord[List[Int]]</code> is produced by</p> 
    <pre><code class="language-scala">summon[Ord[List[Int]]]  // reduces to listOrd(using intOrd)
</code></pre> 
    <p>The <code>summon</code> method is simply defined as the (non-widening) identity function over a context parameter.</p> 
    <pre><code class="language-scala">def summon[T](using x: T): x.type = x
</code></pre> 
    <h2>Syntax</h2> 
    <p>Here is the new syntax of parameters and arguments seen as a delta from the <a href="../../internals/syntax.md">standard context free syntax of Scala 3</a>. <code>using</code> is a soft keyword, recognized only at the start of a parameter or argument list. It can be used as a normal identifier everywhere else.</p> 
    <pre><code>ClsParamClause      ::=  ... | UsingClsParamClause
DefParamClauses     ::=  ... | UsingParamClause
UsingClsParamClause ::=  ‘(’ ‘using’ (ClsParams | Types) ‘)’
UsingParamClause    ::=  ‘(’ ‘using’ (DefParams | Types) ‘)’
ParArgumentExprs    ::=  ... | ‘(’ ‘using’ ExprsInParens ‘)’
</code></pre> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span><span class="pull-right">Generated by&nbsp;<a href="https://github.com/lampepfl/scala3doc">Scala3doc</a></span></footer></div></div><script type="text/javascript" src="../../../scripts/pages.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>
