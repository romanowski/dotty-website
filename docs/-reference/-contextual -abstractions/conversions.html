<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Implicit Conversions</title><script type="text/javascript" src="../../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../../styles/nord-light.css"></link><link rel="stylesheet" href="../../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../../styles/diagram.css"></link><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../../styles/filter-bar.css"></link><script type="text/javascript" src="../../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../../css/dottydoc.css"></link><link rel="stylesheet" href="../../../css/color-brewer.css"></link><script type="text/javascript" src="../../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.docs/reference/contextual/conversions.md////PointingToDeclaration//-1542669386">
    <div class="breadcrumbs"><a href="../../index.html"></a>/<a href="../../Reference/index.html">Reference</a>/<a href="index.html">Contextual Abstractions</a>/<a href="../-contextual -abstractions/conversions.html">Implicit Conversions</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>"Implicit Conversions"</h1> 
     <div class="byline"> <a href="/edit/master//"> <i class="far fa-edit"></i> Edit this page on GitHub </a> 
     </div> 
    </header> 
    <p>Implicit conversions are defined by given instances of the <code>scala.Conversion</code> class. This class is defined in package <code>scala</code> as follows:</p> 
    <pre><code class="language-scala">abstract class Conversion[-T, +U] extends (T =&gt; U)
</code></pre> 
    <p>For example, here is an implicit conversion from <code>String</code> to <code>Token</code>:</p> 
    <pre><code class="language-scala">given Conversion[String, Token] {
  def apply(str: String): Token = new KeyWord(str)
}
</code></pre> 
    <p>Using an alias this can be expressed more concisely as:</p> 
    <pre><code class="language-scala">given Conversion[String, Token] = new KeyWord(_)
</code></pre> 
    <p>An implicit conversion is applied automatically by the compiler in three situations:</p> 
    <ol> 
     <li>If an expression <code>e</code> has type <code>T</code>, and <code>T</code> does not conform to the expression's expected type <code>S</code>.</li> 
     <li>In a selection <code>e.m</code> with <code>e</code> of type <code>T</code>, but <code>T</code> defines no member <code>m</code>.</li> 
     <li>In an application <code>e.m(args)</code> with <code>e</code> of type <code>T</code>, if <code>T</code> does define some member(s) named <code>m</code>, but none of these members can be applied to the arguments <code>args</code>.</li> 
    </ol> 
    <p>In the first case, the compiler looks for a given <code>scala.Conversion</code> instance that maps an argument of type <code>T</code> to type <code>S</code>. In the second and third case, it looks for a given <code>scala.Conversion</code> instance that maps an argument of type <code>T</code> to a type that defines a member <code>m</code> which can be applied to <code>args</code> if present. If such an instance <code>C</code> is found, the expression <code>e</code> is replaced by <code>C.apply(e)</code>.</p> 
    <h2>Examples</h2> 
    <ol> 
     <li>The <code>Predef</code> package contains "auto-boxing" conversions that map primitive number types to subclasses of <code>java.lang.Number</code>. For instance, the conversion from <code>Int</code> to <code>java.lang.Integer</code> can be defined as follows:</li> 
    </ol> 
    <pre><code class="language-scala">given int2Integer as Conversion[Int, java.lang.Integer] =
 java.lang.Integer.valueOf(_)
</code></pre> 
    <ol> 
     <li>The "magnet" pattern is sometimes used to express many variants of a method. Instead of defining overloaded versions of the method, one can also let the method take one or more arguments of specially defined "magnet" types, into which various argument types can be converted. E.g.</li> 
    </ol> 
    <pre><code class="language-scala">object Completions {

  // The argument "magnet" type
  enum CompletionArg {
    case Error(s: String)
    case Response(f: Future[HttpResponse])
    case Status(code: Future[StatusCode])
  }
  object CompletionArg {

    // conversions defining the possible arguments to pass to `complete`
    // these always come with CompletionArg
    // They can be invoked explicitly, e.g.
    //
    //   CompletionArg.fromStatusCode(statusCode)

    given fromString     as Conversion[String, CompletionArg]               = Error(_)
    given fromFuture     as Conversion[Future[HttpResponse], CompletionArg] = Response(_)
    given fromStatusCode as Conversion[Future[StatusCode], CompletionArg]   = Status(_)
  }
  import CompletionArg._

  def complete[T](arg: CompletionArg) = arg match {
    case Error(s) =&gt; ...
    case Response(f) =&gt; ...
    case Status(code) =&gt; ...
  }
}
</code></pre> 
    <p>This setup is more complicated than simple overloading of <code>complete</code>, but it can still be useful if normal overloading is not available (as in the case above, since we cannot have two overloaded methods that take <code>Future[...]</code> arguments), or if normal overloading would lead to a combinatorial explosion of variants.</p> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span><span class="pull-right">Generated by&nbsp;<a href="https://github.com/lampepfl/scala3doc">Scala3doc</a></span></footer></div></div><script type="text/javascript" src="../../../scripts/pages.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>
