<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Announcing Dotty 0.6.0 and 0.7.0-RC1</title><script type="text/javascript" src="../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../styles/nord-light.css"></link><link rel="stylesheet" href="../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../styles/diagram.css"></link><link rel="stylesheet" href="../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../styles/filter-bar.css"></link><script type="text/javascript" src="../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../css/dottydoc.css"></link><link rel="stylesheet" href="../../css/color-brewer.css"></link><script type="text/javascript" src="../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.blog/_posts/2018-03-05-seventh-dotty-milestone-release.md////PointingToDeclaration//-1542669386">
    <div class="breadcrumbs"><a href="../index.html"></a>/<a href="index.html">Blog</a>/<a href="../-blog/2018-03-05-seventh-dotty-milestone-release.html">Announcing Dotty 0.6.0 and 0.7.0-RC1</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>Announcing Dotty 0.6.0 and 0.7.0-RC1</h1> 
     <div class="byline"> <time class="date"> <i class="far fa-calendar-alt"></i> 2018-03-05 </time> <span class="author"> <i class="fas fa-pen-nib"></i> Allan Renucci </span> 
     </div> 
    </header> 
    <p>Today, we are excited to release Dotty versions 0.6.0 and 0.7.0-RC1. These releases serve as a technology preview that demonstrates new language features and the compiler supporting them.</p> 
    <p>If you’re not familiar with Dotty, it's a platform to try out new language concepts and compiler technologies for Scala. The focus is mainly on simplification. We remove extraneous syntax (e.g. no XML literals), and try to boil down Scala’s types into a smaller set of more fundamental constructs. The theory behind these constructs is researched in <a href="https://infoscience.epfl.ch/record/215280">DOT</a>, a calculus for dependent object types. You can learn more about Dotty on our <a href="http://dotty.epfl.ch">website</a>.</p> <!--more--> 
    <p>This is our seventh scheduled release according to our <a href="https://dotty.epfl.ch/docs/usage/version-numbers.html">6-week release schedule</a>. The <a href="https://github.com/lampepfl/dotty/releases/tag/0.6.0-RC1">previous technology preview</a> focussed on bug fixes and stability work.</p> 
    <h2>What’s new in the 0.7.0-RC1 technology preview?</h2> 
    <h3>Enum Simplification <a href="https://github.com/lampepfl/dotty/pull/4003">#4003</a></h3> 
    <p>The previously introduced syntax and rules for enum were arguably too complex. We can considerably simplify them by taking away one capability: that cases can have bodies which can define members. Arguably, if we choose an ADT decomposition of a problem, it's good style to write all methods using pattern matching instead of overriding individual cases. So this removes an unnecessary choice. We now treat enums unequivocally as classes. They can have methods and other statements just like other classes can. Cases in enums are seen as a form of constructors. We do not need a distinction between enum class and enum object anymore. Enums can have companion objects just like normal classes can, of course.</p> 
    <p>Let's consider how <code>Option</code> can be represented as an enum. Previously using an enum class:</p> 
    <pre><code class="language-scala">enum class Option[+T] {
   def isDefined: Boolean
}

object Option {
  case Some[+T](x: T) {
     def isDefined = true
  }
  case None {
     def isDefined = false
  }

  def apply[T](x: T): Option[T] = if (x == null) None else Some(x)
}
</code></pre> 
    <p>And now:</p> 
    <pre><code class="language-scala">enum Option[+T] {
  case Some(x: T)
  case None

  def isDefined: Boolean = this match {
    case None =&gt; false
    case Some(_) =&gt; true
  }
}

object Option {
  def apply[T](x: T): Option[T] = if (x == null) None else Some(x)
}
</code></pre> 
    <p>For more information about <a href="https://dotty.epfl.ch/docs/reference/enums/enums.html">Enumerations</a> and how to use them to model <a href="https://dotty.epfl.ch/docs/reference/enums/adts.html">Algebraic Data Types</a>, visit the respective sections in our documentation.</p> 
    <h3>Erased terms <a href="https://github.com/lampepfl/dotty/pull/3342">#3342</a></h3> 
    <p>The <code>erased</code> modifier can be used on parameters, <code>val</code> and <code>def</code> to enforce that no reference to those terms is ever used. As they are never used, they can safely be removed during compilation.</p> 
    <p>One particular use case is to add implicit type constraints that are only relevant at compilation time. For example, let's consider the following implementation of <code>flatten</code>.</p> 
    <pre><code class="language-scala">class List[X] {
  def flatten[Y](implicit erased ev: X &lt;:&lt; List[Y]): List[Y] = {
    val buffer = new mutable.ListBuffer[Y]
    this.foreach(e =&gt; buffer ++= e.asInstanceOf[List[Y]])
    buffer.toList
  }
}

List(List(1, 2), List(3)).flatten // List(1, 2, 3)
List(1, 2, 3).flatten             // error: Cannot prove that Int &lt;:&lt; List[Y]
</code></pre> 
    <p>The implicit evidence <code>ev</code> is only used to constrain the type parameter <code>X</code> of <code>List</code> such that we can safely cast from <code>X</code> to <code>List[_]</code>. The usage of the <code>erased</code> modifier ensures that the evidence is not used and can be safely removed at compilation time.</p> 
    <p>For more information, visit the <a href="https://dotty.epfl.ch/docs/reference/metaprogramming/erased-terms.html">Erased Terms</a> section of our documentation.</p> 
    <p><strong>Note</strong>: Erased terms replace <em>phantom types</em>: they have similar semantics, but with the added advantage that any type can be an erased parameter. See <a href="https://github.com/lampepfl/dotty/pull/3410">#3410</a>.</p> 
    <h3>Improved IDE support <a href="https://github.com/lampepfl/dotty/pull/3960">#3960</a></h3> 
    <p>The Dotty language server now supports context sensitive IDE completions. Completions now include local and imported definitions. Members completions take possible implicit conversions into account.</p> <!-- A GIF would be nice? --> 
    <p>We also improved the <code>find references</code> functionality. It is more robust and much faster!</p> 
    <p>Try it out in <a href="https://dotty.epfl.ch/docs/usage/ide-support.html">Visual Studio Code</a>!</p> 
    <h3>Better and safer types in pattern matching (improved GADT support)</h3> 
    <p>Consider the following implementation of an evaluator for a very simple language containing only integer literals (<code>Lit</code>) and pairs (<code>Pair</code>):</p> 
    <pre><code class="language-scala">sealed trait Exp
case class Lit(value: Int) extends Exp
case class Pair(fst: Exp, snd: Exp) extends Exp

object Evaluator {
  def eval(e: Exp): Any = e match {
    case Lit(x) =&gt;
      x
    case Pair(a, b) =&gt;
      (eval(a), eval(b))
  }

  eval(Lit(1))                             // 1: Any
  eval(Pair(Pair(Lit(1), Lit(2)), Lit(3))) // ((1, 2), 3) : Any
}
</code></pre> 
    <p>This code is correct but it's not very type-safe since <code>eval</code> returns a value of type <code>Any</code>, we can do better by adding a type parameter to <code>Exp</code> that represents the result type of evaluating the expression:</p> 
    <pre><code class="language-scala">sealed trait Exp[T]
case class Lit(value: Int) extends Exp[Int]
case class Pair[A, B](fst: Exp[A], snd: Exp[B]) extends Exp[(A, B)]

object Evaluator {
  def eval[T](e: Exp[T]): T = e match {
    case Lit(x) =&gt;
      // In this case, T = Int
      x
    case Pair(a, b) =&gt;
      // In this case, T = (A, B) where A is the type of a and B is the type of b
      (eval(a), eval(b))
  }

  eval(Lit(1))                             // 1: Int
  eval(Pair(Pair(Lit(1), Lit(2)), Lit(3))) // ((1, 2), 3) : ((Int, Int), Int)
}
</code></pre> 
    <p>Now the expression <code>Pair(Pair(Lit(1), Lit(2)), Lit(3)))</code> has type <code>Exp[((Int, Int), Int)]</code> and calling <code>eval</code> on it will return a value of type <code>((Int, Int), Int)</code> instead of <code>Any</code>.</p> 
    <p>Something subtle is going on in the definition of <code>eval</code> here: its result type is <code>T</code> which is a type parameter that could be instantiated to anything, and yet in the <code>Lit</code> case we are able to return a value of type <code>Int</code>, and in the <code>Pair</code> case a value of a tuple type. In each case the typechecker has been able to constrain the type of <code>T</code> through unification (e.g. if <code>e</code> matches <code>Lit(x)</code> then <code>Lit</code> is a subtype of <code>Exp[T]</code>, so <code>T</code> must be equal to <code>Int</code>). This is usually referred to as <strong>GADT support</strong> in Scala since it closely mirrors the behavior of <a href="https://en.wikipedia.org/wiki/Generalized_algebraic_data_type">Generalized Algebraic Data Types</a> in Haskell and other languages.</p> 
    <p>GADTs have been a part of Scala for a long time, but in Dotty 0.7.0-RC1 we significantly improved their implementation to catch more issues at compile-time. For example, writing <code>(eval(a), eval(a))</code> instead of <code>(eval(a), eval(b))</code> in the example above should be an error, but it was not caught by Scala 2 or previous versions of Dotty, whereas we now get a type mismatch error as expected. More work remains to be done to fix the remaining <a href="https://github.com/lampepfl/dotty/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+is%3Aopen+gadt">GADT-related issues</a>, but so far no show-stopper has been found.</p> 
    <h2>Trying out Dotty</h2> 
    <h3>Scastie</h3> 
    <p><a href="https://scastie.scala-lang.org/?target=dotty">Scastie</a>, the online Scala playground, supports Dotty. This is an easy way to try Dotty without installing anything.</p> 
    <h3>sbt</h3> 
    <p>Using sbt 0.13.13 or newer, do:</p> 
    <pre><code class="language-shell">sbt new lampepfl/dotty.g8
</code></pre> 
    <p>This will setup a new sbt project with Dotty as compiler. For more details on using Dotty with sbt, see the <a href="https://github.com/lampepfl/dotty-example-project">example project</a>.</p> 
    <h3>IDE support</h3> 
    <p>It is very easy to start using the Dotty IDE in any Dotty project by following the <a href="https://dotty.epfl.ch/docs/usage/ide-support.html">IDE guide</a>.</p> 
    <h3>Standalone installation</h3> 
    <p>Releases are available for download on the <em>Releases</em> section of the Dotty repository: <a href="https://github.com/lampepfl/dotty/releases">https://github.com/lampepfl/dotty/releases</a></p> 
    <p>We also provide a <a href="https://brew.sh/">homebrew</a> package that can be installed by running:</p> 
    <pre><code class="language-shell">brew install lampepfl/brew/dotty
</code></pre> 
    <p>In case you have already installed Dotty via brew, you should instead update it:</p> 
    <pre><code class="language-shell">brew upgrade dotty
</code></pre> 
    <h2>Let us know what you think!</h2> 
    <p>If you have questions or any sort of feedback, feel free to send us a message on our <a href="https://gitter.im/lampepfl/dotty">Gitter channel</a>. If you encounter a bug, please <a href="https://github.com/lampepfl/dotty/issues/new">open an issue on GitHub</a>.</p> 
    <h2>Contributing</h2> 
    <p>Thank you to all the contributors who made this release possible!</p> 
    <p>According to <code>git shortlog -sn --no-merges 0.6.0..0.7.0-RC1</code> these are:</p> 
    <pre><code>   182  Martin Odersky
    94  Nicolas Stucki
    48  Olivier Blanvillain
    38  liu fengyun
    16  Allan Renucci
    15  Guillaume Martres
    11  Aggelos Biboudis
     5  Abel Nieto
     5  Paolo G. Giarrusso
     4  Fengyun Liu
     2  Georg Schmid
     1  Jonathan Skowera
     1  Fedor Shiriaev
     1  Alexander Slesarenko
     1  benkobalog
     1  Jimin Hsieh
</code></pre> 
    <p>If you want to get your hands dirty and contribute to Dotty, now is a good time to get involved! Head to our <a href="https://dotty.epfl.ch/docs/contributing/getting-started.html">Getting Started page for new contributors</a>, and have a look at some of the <a href="https://github.com/lampepfl/dotty/issues?q=is%3Aissue+is%3Aopen+label%3Aexp%3Anovice">good first issues</a>. They make perfect entry-points into hacking on the compiler.</p> 
    <p>We are looking forward to having you join the team of contributors.</p> 
    <h2>Library authors: Join our community build</h2> 
    <p>Dotty now has a set of widely-used community libraries that are built against every nightly Dotty snapshot. Currently this includes ScalaPB, algebra, scalatest, scopt and squants. Join our <a href="https://github.com/lampepfl/dotty-community-build">community build</a> to make sure that our regression suite includes your library.</p> 
    <hr> 
    <footer> 
     <img id="author-img" src="images/allan.jpg"> <span id="author-signature"> Allan Renucci </span> 
    </footer> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span><span class="pull-right">Generated by&nbsp;<a href="https://github.com/lampepfl/scala3doc">Scala3doc</a></span></footer></div></div><script type="text/javascript" src="../../scripts/pages.js"></script><script type="text/javascript" src="../../scripts/main.js"></script></body></html>
