<!-- This page was last generated on 2020-11-18 -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>Higher-Kinded Types in Dotty</title>

        <link rel="icon" type="image/png" href="/images/favicon.png">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">
        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/dottydoc.css">
        <link rel="stylesheet" href="/css/color-brewer.css"><!-- hljs theme -->

        
            <link rel="stylesheet" href="/css/toolbar.css">
        
            <link rel="stylesheet" href="/css/sidebar.css">
        

        <script src="/js/jquery.min.js"></script>
    </head>
    <body>
        <header>
    <nav class="navbar navbar-expand navbar-dark fixed-top">
        <a id="menu-icon" title="Menu" aria-label="Menu">
            <i class="fas fa-bars"></i>
        </a>
        <a id="search-icon" title="Search" aria-label="Search">
            <i class="fas fa-search"></i>
        </a>
        <span id="searchbar">
            <input id="search-api-input" type="text" class="form-control" placeholder="Search API" aria-label="Search API">
            <input id="baseurl-input" type="hidden" value="">
        </span>
        <div class="navbar-brand">
            
            <a href="/index.html">
                <img class="project-logo" src="/images/scala3-logo.svg">
            </a>
            
            <a href="/docs/index.html">
                <div class="project-details">
                    <h1>Dotty Documentation</h1>
                    <h2>3.0.0-M2</h2>
                </div>
            </a>
        </div>

        
        <a id="github-link" title="Project repository" href="https://github.com/lampepfl/dotty">
            
            <i class="fab fa-github" aria-hidden="true"></i>
            
        </a>
        
    </nav>
</header>

<nav class="sidebar">
    <ul class="toc">
        <!-- Redacted documents -->
        
            <li class="leaf"><a href="/blog/index.html" >Blog</a></li>
        
            <li class="section">
  <a onclick='toggleSection(this);'>Usage</a>
  <ul >
    <li class="leaf"><a href="/docs/usage/getting-started.html" >Getting Started</a></li>
<li class="leaf"><a href="/docs/usage/sbt-projects.html" >sbt-projects</a></li>
<li class="leaf"><a href="/docs/usage/ide-support.html" >IDE support for Dotty</a></li>
<li class="leaf"><a href="/docs/usage/worksheet-mode.html" >Worksheet mode in Dotty IDE</a></li>
<li class="leaf"><a href="/docs/usage/language-versions.html" >Language Versions</a></li>
<li class="leaf"><a href="/docs/usage/cbt-projects.html" >cbt-projects</a></li>
<li class="leaf"><a href="/docs/usage/dottydoc.html" >Dottydoc</a></li>
  </ul>
</li>

        
            <li class="section">
  <a onclick='toggleSection(this);'>Reference</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/overview.html" >Overview</a></li>
<li class="section">
  <a onclick='toggleSection(this);'>New Types</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/new-types/intersection-types.html" >Intersection types</a></li>
<li class="leaf"><a href="/docs/reference/new-types/union-types.html" >Union types</a></li>
<li class="leaf"><a href="/docs/reference/new-types/type-lambdas.html" >Type lambdas</a></li>
<li class="leaf"><a href="/docs/reference/new-types/match-types.html" >Match types</a></li>
<li class="leaf"><a href="/docs/reference/new-types/dependent-function-types.html" >Dependent Function Types</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Enums</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/enums/enums.html" >Enumerations</a></li>
<li class="leaf"><a href="/docs/reference/enums/adts.html" >Algebraic Data Types</a></li>
<li class="leaf"><a href="/docs/reference/enums/desugarEnums.html" >Translation</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Contextual Abstractions</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/contextual/motivation.html" >Overview</a></li>
<li class="leaf"><a href="/docs/reference/contextual/givens.html" >Given Instances</a></li>
<li class="leaf"><a href="/docs/reference/contextual/using-clauses.html" >Using Clauses</a></li>
<li class="leaf"><a href="/docs/reference/contextual/context-bounds.html" >Context Bounds</a></li>
<li class="leaf"><a href="/docs/reference/contextual/given-imports.html" >Given Imports</a></li>
<li class="leaf"><a href="/docs/reference/contextual/extension-methods.html" >Extension Methods</a></li>
<li class="leaf"><a href="/docs/reference/contextual/type-classes.html" >Implementing Type classes</a></li>
<li class="leaf"><a href="/docs/reference/contextual/derivation.html" >Type class Derivation</a></li>
<li class="leaf"><a href="/docs/reference/contextual/multiversal-equality.html" >Multiversal Equality</a></li>
<li class="leaf"><a href="/docs/reference/contextual/context-functions.html" >Context Functions</a></li>
<li class="leaf"><a href="/docs/reference/contextual/conversions.html" >Implicit Conversions</a></li>
<li class="leaf"><a href="/docs/reference/contextual/by-name-context-parameters.html" >By-Name Context Parameters</a></li>
<li class="leaf"><a href="/docs/reference/contextual/relationship-implicits.html" >Relationship with Scala 2 Implicits</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Metaprogramming</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/metaprogramming/toc.html" >Overview</a></li>
<li class="leaf"><a href="/docs/reference/metaprogramming/inline.html" >Inline</a></li>
<li class="leaf"><a href="/docs/reference/metaprogramming/macros.html" >Macros</a></li>
<li class="leaf"><a href="/docs/reference/metaprogramming/staging.html" >Staging</a></li>
<li class="leaf"><a href="/docs/reference/metaprogramming/tasty-reflect.html" >TASTy Reflection</a></li>
<li class="leaf"><a href="/docs/reference/metaprogramming/tasty-inspect.html" >TASTy Inspection</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Other New Features</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/other-new-features/trait-parameters.html" >Trait Parameters</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/mixin-traits.html" >Mixin Traits</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/creator-applications.html" >Creator Applications</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/export.html" >Export Clauses</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/opaques.html" >Opaque Type Aliases</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/open-classes.html" >Open Classes</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/parameter-untupling.html" >Parameter Untupling</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/kind-polymorphism.html" >Kind Polymorphism</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/tupled-function.html" >Tupled Function</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/threadUnsafe-annotation.html" >threadUnsafe Annotation</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/targetName.html" >targetName Annotation</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/control-syntax.html" >New Control Syntax</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/indentation.html" >Optional Braces</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/explicit-nulls.html" >Explicit Nulls</a></li>
<li class="leaf"><a href="/docs/reference/other-new-features/safe-initialization.html" >Safe Initialization</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Other Changed Features</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/changed-features/numeric-literals.html" >Numeric Literals</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/structural-types.html" >Structural Types</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/operators.html" >Operators</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/wildcards.html" >Wildcard Types</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/type-checking.html" >Type Checking</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/type-inference.html" >Type Inference</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/implicit-resolution.html" >Implicit Resolution</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/implicit-conversions.html" >Implicit Conversions</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/overload-resolution.html" >Overload Resolution</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/match-syntax.html" >Match Expressions</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/vararg-patterns.html" >Vararg Patterns</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/pattern-bindings.html" >Pattern Bindings</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/pattern-matching.html" >Pattern Matching</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/eta-expansion.html" >Eta Expansion</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/compiler-plugins.html" >Compiler Plugins</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/lazy-vals-init.html" >Lazy Vals initialization</a></li>
<li class="leaf"><a href="/docs/reference/changed-features/main-functions.html" >Main Functions</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Dropped Features</a>
  <ul >
    <li class="leaf"><a href="/docs/reference/dropped-features/delayed-init.html" >DelayedInit</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/macros.html" >Macros</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/existential-types.html" >Existential Types</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/type-projection.html" >Type Projection</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/do-while.html" >Do-While</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/procedure-syntax.html" >Procedure Syntax</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/package-objects.html" >Package Objects</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/early-initializers.html" >Early Initializers</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/class-shadowing.html" >Class Shadowing</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/limit22.html" >Limit 22</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/xml.html" >XML literals</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/symlits.html" >Symbol Literals</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/auto-apply.html" >Auto-Application</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/weak-conformance.html" >Weak Conformance</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/nonlocal-returns.html" >Nonlocal Returns</a></li>
<li class="leaf"><a href="/docs/reference/dropped-features/this-qualifier.html" >[this] Qualifier</a></li>
  </ul>
</li>

  </ul>
</li>

        
            <li class="section">
  <a onclick='toggleSection(this);'>Contributing</a>
  <ul >
    <li class="leaf"><a href="/docs/contributing/contribute-knowledge.html" >Contribute Knowledge</a></li>
<li class="leaf"><a href="/docs/contributing/getting-started.html" >Getting Started</a></li>
<li class="leaf"><a href="/docs/contributing/workflow.html" >Workflow</a></li>
<li class="leaf"><a href="/docs/contributing/testing.html" >Testing</a></li>
<li class="leaf"><a href="/docs/contributing/debugging.html" >Debugging</a></li>
<li class="section">
  <a onclick='toggleSection(this);'>IDEs and Tools</a>
  <ul >
    <li class="leaf"><a href="/docs/contributing/tools/mill.html" >Mill</a></li>
<li class="leaf"><a href="/docs/contributing/tools/scalafix.html" >Scalafix</a></li>
  </ul>
</li>

<li class="section">
  <a onclick='toggleSection(this);'>Procedures</a>
  <ul >
    <li class="leaf"><a href="/docs/contributing/procedures/release.html" >Release Model</a></li>
<li class="leaf"><a href="/docs/contributing/procedures/vulpix.html" >Modifying the Test Framework</a></li>
  </ul>
</li>

  </ul>
</li>

        
            <li class="section">
  <a onclick='toggleSection(this);'>Internals</a>
  <ul class="toggled">
    <li class="leaf"><a href="/docs/internals/backend.html" >Backend</a></li>
<li class="leaf"><a href="/docs/internals/classpaths.html" >Classpaths</a></li>
<li class="leaf"><a href="/docs/internals/core-data-structures.html" >Core Data Structrues</a></li>
<li class="leaf"><a href="/docs/internals/contexts.html" >Contexts</a></li>
<li class="leaf"><a href="/docs/internals/dotc-scalac.html" >Dotc vs Scalac</a></li>
<li class="leaf"><a href="/docs/internals/higher-kinded-v2.html" class="toggled">Higher-Kinded Types</a></li>
<li class="leaf"><a href="/docs/internals/overall-structure.html" >Overall Structure</a></li>
<li class="leaf"><a href="/docs/internals/periods.html" >Periods</a></li>
<li class="leaf"><a href="/docs/internals/syntax.html" >Syntax</a></li>
<li class="leaf"><a href="/docs/internals/type-system.html" >Type System</a></li>
<li class="leaf"><a href="/docs/internals/dotty-internals-1-notes.html" >Dotty Internals 1: Trees & Symbols (Meeting Notes)</a></li>
<li class="leaf"><a href="/docs/internals/debug-macros.html" >Debug Macros</a></li>
  </ul>
</li>

        
            <li class="section">
  <a onclick='toggleSection(this);'>Resources</a>
  <ul >
    <li class="leaf"><a href="/docs/resources/talks.html" >Talks</a></li>
  </ul>
</li>

        
        <!-- API documentation -->
        
        <li class="index-entities section">
            <a onclick="toggleSection(this);">API</a>
            <ul>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/dotty/index.html">
                        dotty
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/dotty/DottyPredef$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/dotty/DottyPredef$.html">DottyPredef</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/dotty/runtime/index.html">
                        dotty.runtime
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/dotty/runtime/Arrays$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/dotty/runtime/Arrays$.html">Arrays</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/dotty/runtime/LazyVals$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/dotty/runtime/LazyVals$.html">LazyVals</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/index.html">
                        scala
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/$times$colon$.html">O</a>
                                    
                                    <a class="letter-anchor class" href="/api/scala/$times$colon.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/$times$colon.html">*:</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/Conversion.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/Conversion.html">Conversion</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/Tuple$package$/EmptyTuple$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/Tuple$package$/EmptyTuple$.html">EmptyTuple</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/Eql$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/Eql.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/Eql.html">Eql</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/NonEmptyTuple.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/NonEmptyTuple.html">NonEmptyTuple</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/PolyFunction.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/PolyFunction.html">PolyFunction</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/Product0$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/Product0.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/Product0.html">Product0</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/Selectable$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/Selectable.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/Selectable.html">Selectable</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/Tuple$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/Tuple.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/Tuple.html">Tuple</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/deriving$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/deriving$.html">deriving</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/main.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/main.html">main</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/opaques$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/opaques$.html">opaques</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/annotation/index.html">
                        scala.annotation
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/annotation/RefiningAnnotation.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/RefiningAnnotation.html">RefiningAnnotation</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/alpha.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/alpha.html">alpha</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/constructorOnly.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/constructorOnly.html">constructorOnly</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/infix.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/infix.html">infix</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/mixin.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/mixin.html">mixin</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/static.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/static.html">static</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/targetName.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/targetName.html">targetName</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/threadUnsafe.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/threadUnsafe.html">threadUnsafe</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/annotation/internal/index.html">
                        scala.annotation.internal
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/Alias.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/Alias.html">Alias</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/AnnotationDefault.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/AnnotationDefault.html">AnnotationDefault</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/Body.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/Body.html">Body</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/Child.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/Child.html">Child</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/ContextResultCount.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/ContextResultCount.html">ContextResultCount</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/InlineParam.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/InlineParam.html">InlineParam</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/Repeated.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/Repeated.html">Repeated</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/SourceFile.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/SourceFile.html">SourceFile</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/WithBounds.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/WithBounds.html">WithBounds</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/sharable.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/sharable.html">sharable</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/annotation/internal/unshared.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/annotation/internal/unshared.html">unshared</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/compiletime/index.html">
                        scala.compiletime
                    </a>
                    <ul class="package-entities">
                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/compiletime/ops/index.html">
                        scala.compiletime.ops
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/compiletime/ops/package$/any$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/compiletime/ops/package$/any$.html">any</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/compiletime/ops/package$/boolean$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/compiletime/ops/package$/boolean$.html">boolean</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/compiletime/ops/package$/int$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/compiletime/ops/package$/int$.html">int</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/compiletime/ops/package$/string$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/compiletime/ops/package$/string$.html">string</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/compiletime/testing/index.html">
                        scala.compiletime.testing
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/compiletime/testing/Error$.html">O</a>
                                    
                                    <a class="letter-anchor case class" href="/api/scala/compiletime/testing/Error.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/compiletime/testing/Error.html">Error</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/compiletime/testing/ErrorKind$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/compiletime/testing/ErrorKind.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/compiletime/testing/ErrorKind.html">ErrorKind</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/internal/index.html">
                        scala.internal
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/internal/MatchCase.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/internal/MatchCase.html">MatchCase</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/internal/TypeBox.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/internal/TypeBox.html">TypeBox</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/quoted/index.html">
                        scala.quoted
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Const$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Const$.html">Const</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Consts$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Consts$.html">Consts</a>
                            </li>
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Expr$.html">O</a>
                                    
                                    <a class="letter-anchor class" href="/api/scala/quoted/Expr.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Expr.html">Expr</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/quoted/ExprMap.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/ExprMap.html">ExprMap</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Liftable$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/quoted/Liftable.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Liftable.html">Liftable</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/quoted/QuoteContext.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/QuoteContext.html">QuoteContext</a>
                            </li>
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Type$.html">O</a>
                                    
                                    <a class="letter-anchor class" href="/api/scala/quoted/Type.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Type.html">Type</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Unliftable$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/quoted/Unliftable.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Unliftable.html">Unliftable</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Unlifted$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Unlifted$.html">Unlifted</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/Varargs$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/Varargs$.html">Varargs</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/report$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/report$.html">report</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/quoted/internal/index.html">
                        scala.quoted.internal
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/internal/Expr$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/internal/Expr$.html">Expr</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/quoted/internal/Patterns$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/internal/Patterns$.html">Patterns</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/quoted/internal/QuoteMatching.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/internal/QuoteMatching.html">QuoteMatching</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/quoted/internal/QuoteUnpickler.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/internal/QuoteUnpickler.html">QuoteUnpickler</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/quoted/internal/SplicedType.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/internal/SplicedType.html">SplicedType</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor class" href="/api/scala/quoted/internal/StopMacroExpansion.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/quoted/internal/StopMacroExpansion.html">StopMacroExpansion</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/reflect/index.html">
                        scala.reflect
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/reflect/Enum.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/reflect/Enum.html">Enum</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/reflect/Selectable$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/reflect/Selectable.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/reflect/Selectable.html">Selectable</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/reflect/TypeTest$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/reflect/TypeTest.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/reflect/TypeTest.html">TypeTest</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/runtime/index.html">
                        scala.runtime
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/runtime/EnumValue.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/runtime/EnumValue.html">EnumValue</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/runtime/FunctionXXL.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/runtime/FunctionXXL.html">FunctionXXL</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/runtime/Scala3RunTime$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/runtime/Scala3RunTime$.html">Scala3RunTime</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/runtime/Tuple$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/runtime/Tuple$.html">Tuple</a>
                            </li>
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/runtime/TupleXXL$.html">O</a>
                                    
                                    <a class="letter-anchor class" href="/api/scala/runtime/TupleXXL.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/runtime/TupleXXL.html">TupleXXL</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/runtime/TupledFunctions$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/runtime/TupledFunctions$.html">TupledFunctions</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/util/index.html">
                        scala.util
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/util/CommandLineParser$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/util/CommandLineParser$.html">CommandLineParser</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/util/FromDigits$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/util/FromDigits.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/util/FromDigits.html">FromDigits</a>
                            </li>
                            

                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor trait" href="/api/scala/util/LowPriorityNot.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/util/LowPriorityNot.html">LowPriorityNot</a>
                            </li>
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/util/Not$.html">O</a>
                                    
                                    <a class="letter-anchor class" href="/api/scala/util/Not.html">C</a>
                                </div>
                                <a class="entity-name" href="/api/scala/util/Not.html">Not</a>
                            </li>
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                             <!-- ignore: companions are handled below -->
                            

                        
                            

                            <li class=" with-companion ">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/util/TupledFunction$.html">O</a>
                                    
                                    <a class="letter-anchor trait" href="/api/scala/util/TupledFunction.html">T</a>
                                </div>
                                <a class="entity-name" href="/api/scala/util/TupledFunction.html">TupledFunction</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scala/util/control/index.html">
                        scala.util.control
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scala/util/control/NonLocalReturns$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scala/util/control/NonLocalReturns$.html">NonLocalReturns</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
                <li class="index-entity entity-package section">
                    <a class="package-toggle" onclick="toggleSection(this);">
                        <i class="fas fa-angle-right"></i>
                    </a>
                    <a class="entity-name" href="/api/scalaShadowing/index.html">
                        scalaShadowing
                    </a>
                    <ul class="package-entities">
                        
                            

                            <li class="">
                                <div class="entity-kinds">
                                    
                                    <a class="letter-anchor object" href="/api/scalaShadowing/language$.html">O</a>
                                </div>
                                <a class="entity-name" href="/api/scalaShadowing/language$.html">language</a>
                            </li>
                            

                        
                    </ul>
                </li>
            
            </ul>
        </li>
        
    </ul>
</nav>

<div id="content-wrapper">
    <main class="container">
    <header>
        <h1>Higher-Kinded Types in Dotty</h1>
        <div class="byline">
            <a href="https://github.com/lampepfl/dotty/edit/master/docs/docs/internals/higher-kinded-v2.md">
                <i class="far fa-edit"></i>
                Edit this page on GitHub
            </a>
        </div>
    </header>
    <aside class="warning">
    This page is out of date and preserved for posterity. Please see
    <a href="http://guillaume.martres.me/publications/dotty-hk.pdf">
    Implementing Higher-Kinded Types in Dotty</a> for a more up to date version
</aside>
<h1><a href="#higher-kinded-types-in-dotty-v2" id="higher-kinded-types-in-dotty-v2" class="anchor"></a>Higher-Kinded Types in Dotty V2</h1>
<p>This note outlines how we intend to represent higher-kinded types in Dotty.
The principal idea is to collapse the four previously disparate features of
refinements, type parameters, existentials and higher-kinded types into just
one: refinements of type members. All other features will be encoded using
these refinements.</p>
<p>The complexity of type systems tends to grow exponentially with the number of
independent features, because there are an exponential number of possible
feature interactions. Consequently, a reduction from 4 to 1 fundamental
features achieves a dramatic reduction of complexity. It also adds some nice
usablilty improvements, notably in the area of partial type application.</p>
<p>This is a second version of the scheme which differs in a key aspect from the
first one: Following Adriaan's idea, we use traits with type members to model
type lambdas and type applications. This is both more general and more robust
than the intersections with type constructor traits that we had in the first
version.</p>
<h2><a href="#the-duality" id="the-duality" class="anchor"></a>The duality</h2>
<p>The core idea: A parameterized class such as</p>
<pre><code class="scala">class Map[K, V]
</code></pre>
<p>is treated as equivalent to a type with type members:</p>
<pre><code class="scala">class Map { type Map$K; type Map$V }
</code></pre>
<p>The type members are name-mangled (i.e. <code>Map$K</code>) so that they do not conflict
with other members or parameters named <code>K</code> or <code>V</code>.</p>
<p>A type-instance such as <code>Map[String, Int]</code> would then be treated as equivalent
to:</p>
<pre><code class="scala">Map { type Map$K = String; type Map$V = Int }
</code></pre>
<h2><a href="#named-type-parameters" id="named-type-parameters" class="anchor"></a>Named type parameters</h2>
<p>Type parameters can have unmangled names. This is achieved by adding the <code>type</code>
keyword to a type parameter declaration, analogous to how <code>val</code> indicates a
named field. For instance,</p>
<pre><code class="scala">class Map[type K, type V]
</code></pre>
<p>is treated as equivalent to</p>
<pre><code class="scala">class Map { type K; type V }
</code></pre>
<p>The parameters are made visible as fields.</p>
<h2><a href="#wildcards" id="wildcards" class="anchor"></a>Wildcards</h2>
<p>A wildcard type such as <code>Map[_, Int]</code> is equivalent to:</p>
<pre><code class="scala">Map { type Map$V = Int }
</code></pre>
<p>I.e. <code>_</code>'s omit parameters from being instantiated. Wildcard arguments can have
bounds. E.g.</p>
<pre><code class="scala">Map[_ &lt;: AnyRef, Int]
</code></pre>
<p>is equivalent to:</p>
<pre><code class="scala">Map { type Map$K &lt;: AnyRef; type Map$V = Int }
</code></pre>
<h2><a href="#type-parameters-in-the-encodings" id="type-parameters-in-the-encodings" class="anchor"></a>Type parameters in the encodings</h2>
<p>The notion of type parameters makes sense even for encoded types, which do not
contain parameter lists in their syntax. Specifically, the type parameters of a
type are a sequence of type fields that correspond to parameters in the
unencoded type. They are determined as follows.</p>
<ul>
<li>The type parameters of a class or trait type are those parameter fields declared in the class
that are not yet instantiated, in the order they are given. Type parameter fields of parents
are not considered.</li>
<li>The type parameters of an abstract type are the type parameters of its upper bound.</li>
<li>The type parameters of an alias type are the type parameters of its right hand side.</li>
<li>The type parameters of every other type is the empty sequence.</li>
</ul>
<h2><a href="#partial-applications" id="partial-applications" class="anchor"></a>Partial applications</h2>
<p>The definition of type parameters in the previous section leads to a simple
model of partial applications.  Consider for instance:</p>
<pre><code class="scala">type Histogram = Map[_, Int]
</code></pre>
<p><code>Histogram</code> is a higher-kinded type that still has one type parameter.
<code>Histogram[String]</code> would be a possible type instance, and it would be
equivalent to <code>Map[String, Int]</code>.</p>
<h2><a href="#modelling-polymorphic-type-declarations" id="modelling-polymorphic-type-declarations" class="anchor"></a>Modelling polymorphic type declarations</h2>
<p>The partial application scheme gives us a new -- and quite elegant -- way to do
certain higher-kinded types. But how do we interprete the poymorphic types that
exist in current Scala?</p>
<p>More concretely, current Scala allows us to write parameterized type
definitions, abstract types, and type parameters. In the new scheme, only
classes (and traits) can have parameters and these are treated as equivalent to
type members. Type aliases and abstract types do not allow the definition of
parameterized types so we have to interprete polymorphic type aliases and
abstract types specially.</p>
<h2><a href="#modelling-polymorphic-type-aliases-simple-case" id="modelling-polymorphic-type-aliases-simple-case" class="anchor"></a>Modelling polymorphic type aliases: simple case</h2>
<p>A polymorphic type alias such as:</p>
<pre><code class="scala">type Pair[T] = Tuple2[T, T]
</code></pre>
<p>where <code>Tuple2</code> is declared as</p>
<pre><code class="scala">class Tuple2[T1, T2] ...
</code></pre>
<p>is expanded to a monomorphic type alias like this:</p>
<pre><code class="scala">type Pair = Tuple2 { type Tuple2$T2 = Tuple2$T1 }
</code></pre>
<p>More generally, each type parameter of the left-hand side must appear as a type
member of the right hand side type. Type members must appear in the same order
as their corresponding type parameters.  References to the type parameter are
then translated to references to the type member. The type member itself is
left uninstantiated.</p>
<p>This technique can expand most polymorphic type aliases appearing in Scala
codebases but not all of them. For instance, the following alias cannot be
expanded, because the parameter type <code>T</code> is not a type member of the right-hand
side <code>List[List[T]]</code>.</p>
<pre><code class="scala">type List2[T] = List[List[T]]
</code></pre>
<p>We scanned the Scala standard library for occurrences of polymorphic type
aliases and determined that only two occurrences could not be expanded.  In
<code>io/Codec.scala</code>:</p>
<pre><code class="scala">type Configure[T] = (T =&gt; T, Boolean)
</code></pre>
<p>And in <code>collection/immutable/HashMap.scala</code>:</p>
<pre><code class="scala">private type MergeFunction[A1, B1] = ((A1, B1), (A1, B1)) =&gt; (A1, B1)
</code></pre>
<p>For these cases, we use a fall-back scheme that models a parameterized alias as
a <code>Lambda</code> type.</p>
<h2><a href="#modelling-polymorphic-type-aliases-general-case" id="modelling-polymorphic-type-aliases-general-case" class="anchor"></a>Modelling polymorphic type aliases: general case</h2>
<p>A polymorphic type alias such as:</p>
<pre><code class="scala">type List2D[T] = List[List[T]]
</code></pre>
<p>is represented as a monomorphic type alias of a type lambda. Here's the
expanded version of the definition above:</p>
<pre><code class="scala">type List2D = Lambda$I { type Apply = List[List[$hkArg$0]] }
</code></pre>
<p>Here, <code>Lambda$I</code> is a standard trait defined as follows:</p>
<pre><code class="scala">trait Lambda$I[type $hkArg$0] { type +Apply }
</code></pre>
<p>The <code>I</code> suffix of the <code>Lambda</code> trait indicates that it has one invariant type
parameter (named $hkArg$0).  Other suffixes are <code>P</code> for covariant type
parameters, and <code>N</code> for contravariant type parameters. Lambda traits can have
more than one type parameter. For instance, here is a trait with contravariant
and covariant type parameters:</p>
<pre><code class="scala">trait Lambda$NP[type -$hkArg$0, +$hkArg$1] { type +Apply } extends Lambda$IP with Lambda$NI
</code></pre>
<p>Aside: the <code>+</code> prefix in front of <code>Apply</code> indicates that <code>Apply</code> is a covariant
type field. Dotty admits variance annotations on type members.</p>
<p>The definition of <code>Lambda$NP</code> shows that <code>Lambda</code> traits form a subtyping
hierarchy: Traits which have covariant or contravariant type parameters are
subtypes of traits which don't. The supertraits of <code>Lambda$NP</code> would themselves
be written as follows.</p>
<pre><code class="scala">trait Lambda$IP[type $hkArg$0, +$hkArg$1] { type +Apply } extends Lambda$II
trait Lambda$NI[type -$hkArg$0, $hkArg$1] { type +Apply } extends Lambda$II
trait Lambda$II[type $hkArg$0, $hkArg$1] { type +Apply }
</code></pre>
<p><code>Lambda</code> traits are special in that they influence how type applications are
expanded: If the standard type application <code>T[X1, ..., Xn]</code> leads to a subtype
<code>S</code> of a type instance</p>
<pre><code class="scala">LambdaXYZ { type Arg1 = T1; ...; type ArgN = Tn; type Apply ... }
</code></pre>
<p>where all argument fields <code>Arg1, ..., ArgN</code> are concretely defined and the
definition of the <code>Apply</code> field may be either abstract or concrete, then the
application is further expanded to <code>S # Apply</code>.</p>
<p>For instance, the type instance <code>List2D[String]</code> would be expanded to</p>
<pre><code class="scala">Lambda$I { type $hkArg$0 = String; type Apply = List[List[String]] } # Apply
</code></pre>
<p>which in turn simplifies to <code>List[List[String]]</code>.</p>
<p>2nd Example: Consider the two aliases</p>
<pre><code class="scala">type RMap[K, V] = Map[V, K]
type RRMap[K, V] = RMap[V, K]
</code></pre>
<p>These expand as follows:</p>
<pre><code class="scala">type RMap  = Lambda$II { self1 =&gt; type Apply = Map[self1.$hkArg$1, self1.$hkArg$0] }
type RRMap = Lambda$II { self2 =&gt; type Apply = RMap[self2.$hkArg$1, self2.$hkArg$0] }
</code></pre>
<p>Substituting the definition of <code>RMap</code> and expanding the type application gives:</p>
<pre><code class="scala">type RRMap = Lambda$II { self2 =&gt; type Apply =
               Lambda$II { self1 =&gt; type Apply = Map[self1.$hkArg$1, self1.$hkArg$0] }
                 { type $hkArg$0 = self2.$hkArg$1; type $hkArg$1 = self2.$hkArg$0 } # Apply }
</code></pre>
<p>Substituting the definitions for <code>self1.$hkArg${1,2}</code> gives:</p>
<pre><code class="scala">type RRMap = Lambda$II { self2 =&gt; type Apply =
               Lambda$II { self1 =&gt; type Apply = Map[self2.$hkArg$0, self2.$hkArg$1] }
                  { type $hkArg$0 = self2.$hkArg$1; type $hkArg$1 = self2.$hkArg$0 } # Apply }
</code></pre>
<p>Simplifiying the <code># Apply</code> selection gives:</p>
<pre><code class="scala">type RRMap = Lambda$II { self2 =&gt; type Apply = Map[self2.$hkArg$0, self2.$hkArg$1] }
</code></pre>
<p>This can be regarded as the eta-expanded version of <code>Map</code>. It has the same expansion as</p>
<pre><code class="scala">type IMap[K, V] = Map[K, V]
</code></pre>
<h2><a href="#modelling-higher-kinded-types" id="modelling-higher-kinded-types" class="anchor"></a>Modelling higher-kinded types</h2>
<p>The encoding of higher-kinded types uses again the <code>Lambda</code> traits to represent
type constructors. Consider the higher-kinded type declaration</p>
<pre><code class="scala">type Rep[T]
</code></pre>
<p>We expand this to</p>
<pre><code class="scala">type Rep &lt;: Lambda$I
</code></pre>
<p>The type parameters of <code>Rep</code> are the type parameters of its upper bound, so
<code>Rep</code> is a unary type constructor.</p>
<p>More generally, a higher-kinded type declaration</p>
<pre><code class="scala">type T[v1 X1 &gt;: S1 &lt;: U1, ..., vn XN &gt;: SN &lt;: UN] &gt;: SR &lt;: UR
</code></pre>
<p>is encoded as</p>
<pre><code class="scala">type T &lt;: LambdaV1...Vn { self =&gt;
  type v1 $hkArg$0 &gt;: s(S1) &lt;: s(U1)
  ...
  type vn $hkArg$N &gt;: s(SN) &lt;: s(UN)
  type Apply &gt;: s(SR) &lt;: s(UR)
}
</code></pre>
<p>where <code>s</code> is the substitution <code>[XI := self.$hkArg$I | I = 1,...,N]</code>.</p>
<p>If we instantiate <code>Rep</code> with a type argument, this is expanded as was explained
before.</p>
<pre><code class="scala">Rep[String]
</code></pre>
<p>would expand to</p>
<pre><code class="scala">Rep { type $hkArg$0 = String } # Apply
</code></pre>
<p>If we instantiate the higher-kinded type with a concrete type constructor (i.e.
a parameterized trait or class), we have to do one extra adaptation to make it
work. The parameterized trait or class has to be eta-expanded so that it
comforms to the <code>Lambda</code> bound. For instance,</p>
<pre><code class="scala">type Rep = Set
</code></pre>
<p>would expand to:</p>
<pre><code class="scala">type Rep = Lambda1 { type Apply = Set[$hkArg$0] }
</code></pre>
<p>Or,</p>
<pre><code class="scala">type Rep = Map[String, _]
</code></pre>
<p>would expand to</p>
<pre><code class="scala">type Rep = Lambda1 { type Apply = Map[String, $hkArg$0] }
</code></pre>
<h2><a href="#full-example" id="full-example" class="anchor"></a>Full example</h2>
<p>Consider the higher-kinded <code>Functor</code> type class</p>
<pre><code class="scala">class Functor[F[_]] {
   def map[A, B](f: A =&gt; B): F[A] =&gt; F[B]
}
</code></pre>
<p>This would be represented as follows:</p>
<pre><code class="scala">class Functor[F &lt;: Lambda1] {
   def map[A, B](f: A =&gt; B): F { type $hkArg$0 = A } # Apply  =&gt;  F { type $hkArg$0 = B } # Apply
}
</code></pre>
<p>The type <code>Functor[List]</code> would be represented as follows</p>
<pre><code class="scala">Functor {
   type F = Lambda1 { type Apply = List[$hkArg$0] }
}
</code></pre>
<p>Now, assume we have a value</p>
<pre><code class="scala">val ml: Functor[List]
</code></pre>
<p>Then <code>ml.map</code> would have type</p>
<pre><code class="scala">s(F { type $hkArg$0 = A } # Apply  =&gt;  F { type $hkArg$0 = B } # Apply)
</code></pre>
<p>where <code>s</code> is the substitution of <code>[F := Lambda1 { type Apply = List[$hkArg$0] }]</code>.
This gives:</p>
<pre><code class="scala">Lambda1 { type Apply = List[$hkArg$0] } { type $hkArg$0 = A } # Apply
 =&gt;  Lambda1 { type Apply = List[$hkArg$0] } { type $hkArg$0 = B } # Apply
</code></pre>
<p>This type simplifies to:</p>
<pre><code class="scala">List[A] =&gt; List[B]
</code></pre>
<h2><a href="#status-of-" id="status-of-" class="anchor"></a>Status of <code>#</code></h2>
<p>In the scheme above we have silently assumed that <code>#</code> &quot;does the right thing&quot;,
i.e. that the types are well-formed and we can collapse a type alias with a <code>#</code>
projection, thereby giving us a form of beta reduction.</p>
<p>In Scala 2.x, this would not work, because <code>T#X</code> means <code>x.X forSome { val x: T }</code>. Hence, two occurrences of <code>Rep[Int]</code> say, would not be recognized to be
equal because the existential would be opened each time afresh.</p>
<p>In pre-existentials Scala, this would not have worked either. There, <code>T#X</code> was
a fundamental type constructor, but was restricted to alias types or classes
for both <code>T</code> and <code>X</code>.  Roughly, <code>#</code> was meant to encode Java's inner classes.
In Java, given the classes</p>
<pre><code class="scala">class Outer { class Inner }
class Sub1 extends Outer
class Sub2 extends Outer
</code></pre>
<p>The types <code>Outer#Inner</code>, <code>Sub1#Inner</code> and <code>Sub2#Inner</code> would all exist and be
regarded as equal to each other. But if <code>Outer</code> had abstract type members this
would not work, since an abstract type member could be instantiated differently
in <code>Sub1</code> and <code>Sub2</code>.  Assuming that <code>Sub1#Inner = Sub2#Inner</code> could then lead
to a soundness hole. To avoid soundness problems, the types in <code>X#Y</code> were
restricted so that <code>Y</code> was (an alias of) a class type and <code>X</code> was (an alias of)
a class type with no abstract type members.</p>
<p>I believe we can go back to regarding <code>T#X</code> as a fundamental type constructor,
the way it was done in pre-existential Scala, but with the following relaxed
restriction:</p>
<blockquote>
<p>In a type selection <code>T#x</code>, <code>T</code> is not allowed to have any abstract members different from <code>X</code></p>
</blockquote>
<p>This would typecheck the higher-kinded types examples, because they only
project with <code># Apply</code> once all <code>$hkArg$</code> type members are fully instantiated.</p>
<p>It would be good to study this rule formally, trying to verify its soundness.</p>

</main>
</div>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

        <script src="/js/highlight.pack.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        
            <script src="/js/toolbar.js"></script>
        
            <script src="/js/sidebar.js"></script>
        
        <script src="/js/dottydoc.js"></script>
    </body>
</html>
