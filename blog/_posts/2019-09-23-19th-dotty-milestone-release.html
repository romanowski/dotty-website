<html><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><title>Announcing Dotty 0.19.0-RC1 – further refinements of the syntax and the migration to 2.13.1 standard library</title><link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico"></link><script type="text/javascript" src="../../scripts/clipboard.js" defer="true"></script><script type="text/javascript" src="../../scripts/platform-content-handler.js" defer="true"></script><script type="text/javascript" src="../../scripts/main.js" defer="true"></script><link rel="stylesheet" href="../../styles/nord-light.css"></link><link rel="stylesheet" href="../../styles/scalastyle.css"></link><link rel="stylesheet" href="../../styles/dotty-icons.css"></link><link rel="stylesheet" href="../../styles/diagram.css"></link><link rel="stylesheet" href="../../styles/filter-bar.css"></link><link rel="stylesheet" href="../../styles/search-bar.css"></link><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="../../scripts/diagram.js" defer="true"></script><link rel="stylesheet" href="../../styles/filter-bar.css"></link><script type="text/javascript" src="../../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../../scripts/data.js" defer="true"></script><script type="text/javascript" src="../../scripts/fast-navigation-loader.js" defer="true"></script><link rel="stylesheet" href="../../css/bootstrap.min.css"></link><link rel="stylesheet" href="../../css/dottydoc.css"></link><link rel="stylesheet" href="../../css/color-brewer.css"></link><script type="text/javascript" src="../../js/jquery.min.js" defer="true"></script><script type="text/javascript" src="../../js/bootstrap.min.js" defer="true"></script><script>var pathToRoot = "../../";</script></head><body><div id="container"><div id="leftColumn"><div id="logo"><span><img src="../../project-logo/logo.svg"></img></span><span><div class="projectName">Scala 3</div><div class="projectVersion">3.0.0-M2</div></span></div><div id="paneSearch"></div><nav id="sideMenu"></nav></div><div id="main"><div id="leftToggler"><span class="icon-toggler"></span></div><div id="searchBar"></div><main>
  <div id="content" pageIds="_.blog/_posts/2019-09-23-19th-dotty-milestone-release.md////PointingToDeclaration//-1490135309">
    <div class="breadcrumbs"><a href="../../docs/index.html"></a>/<a href="../index.html">Blog</a>/<a href="2019-09-23-19th-dotty-milestone-release.html">Announcing Dotty 0.19.0-RC1 – further refinements of the syntax and the migration to 2.13.1 standard library</a></div>
<html>
 <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"> 
 </head>
 <body>
  <div id="content-wrapper"> 
   <main class="container"> 
    <header> 
     <h1>Announcing Dotty 0.19.0-RC1 – further refinements of the syntax and the migration to 2.13.1 standard library</h1> 
     <div class="byline"> <time class="date"> <i class="far fa-calendar-alt"></i> 2019-09-23 </time> <span class="author"> <i class="fas fa-pen-nib"></i> Anatolii Kmetiuk </span> 
     </div> 
    </header> 
    <p>Greetings! With this post, we are proud to announce the 19th release of Dotty. This release features further changes to the syntax following the feedback from the community and further discussion. Another important change is the migration to the 2.13.1 standard library.</p> 
    <p>This release serves as a technology preview that demonstrates new language features and the compiler supporting them.</p> 
    <p>Dotty is the project name for technologies that are being considered for inclusion in Scala 3. Scala has pioneered the fusion of object-oriented and functional programming in a typed setting. Scala 3 will be a big step towards realising the full potential of these ideas. Its main objectives are to</p> 
    <ul> 
     <li>become more opinionated by promoting programming idioms we found to work well,</li> 
     <li>simplify where possible,</li> 
     <li>eliminate inconsistencies and surprising behaviours,</li> 
     <li>build on strong foundations to ensure the design hangs together well,</li> 
     <li>consolidate language constructs to improve the language’s consistency, safety, ergonomics, and performance.</li> 
    </ul> 
    <p>You can learn more about Dotty on our <a href="https://dotty.epfl.ch">website</a>.</p> <!--more--> 
    <h1><a href="#whats-new-in-the-0190-rc1-technology-preview" id="whats-new-in-the-0190-rc1-technology-preview" class="anchor"></a>What’s new in the 0.19.0-RC1 technology preview?</h1> 
    <h2><a href="#given-syntax-reworked" id="given-syntax-reworked" class="anchor"></a>Given syntax reworked</h2> 
    <p><code>the</code> method (a better version of <code>implicitly</code> in Scala 3) was renamed to <code>summon</code>.</p> 
    <p><code>given</code> definitions now closely resemble ordinary definitions:</p> 
    <pre><code class="language-scala">given Int = 10  // Anonymous
given x: String = "foo"  // Named
given f(given x: Int): Option[Int] = Some(x * x)  // With given parameters
given [T](given opt: Option[T]): List[T] = opt.toList  // Anonymous with type parameters

@main def Test = println(summon[List[Int]])
</code></pre> 
    <p>Note that <code>as</code> was dropped and <code>given</code> must now go inside the parentheses as opposed of being used in an infix style.</p> 
    <p>All of the experimental syntax related to givens – such as <code>delegate for</code>, <code>given as</code>, infix-style <code>given</code> – is now dropped.</p> 
    <h2><a href="#colons-dropped-from-class-or-object-definitions" id="colons-dropped-from-class-or-object-definitions" class="anchor"></a>Colons dropped from class or object definitions</h2> 
    <p>Now you can define an object as follows:</p> 
    <pre><code class="language-scala">object Bar
  val x = 10

@main def Test = println(Bar.x)  // 10
</code></pre> 
    <p>In <code>0.18.1-RC1</code>, you would have needed to put a colon after <code>Bar</code>. The colon was also dropped for traits, classes and enums.</p> 
    <h2><a href="#allow-given-in-pattern-bindings" id="allow-given-in-pattern-bindings" class="anchor"></a>Allow <code>given</code> in pattern bindings</h2> 
    <p>Consider you have the following monadic flow:</p> 
    <pre><code class="language-scala">for
  x   &lt;- bar
  res &lt;- foo(given x)
yield res
</code></pre> 
    <p>Writing entire programs in a monadic flow is not uncommon in functional programming. When working in this style, a situation may arise as shown above: one statement of the monadic flow implicitly depends on the result of another one. It was impossible to declare a pattern variable as a given, which necessitated passing it around explicitly. Not anymore! Now, you can write the above code as follows:</p> 
    <pre><code class="language-scala">for
  given x: Int &lt;- bar  // Int, or whatever type you are extracting
  res &lt;- foo
yield res
</code></pre> 
    <p>Note that the type of the given variable must be specified explicitly.</p> 
    <p>Full example:</p> 
    <pre><code class="language-scala">def foo(given x: Int): Option[Int] = Some(x * x)
def bar = Some(10)

@main def Test =
  for
    given x: Int &lt;- bar
    res &lt;- foo
  yield println(res)
</code></pre> 
    <p>This syntax is allowed anywhere where a pattern is allowed. So you can write:</p> 
    <pre><code class="language-scala">user match
  case User(_, Some(given email: Email)) =&gt; sendEmail
</code></pre> 
    <p>Full example:</p> 
    <pre><code class="language-scala">opaque type Email = String
object Email
  def apply(value: String): Email = value

def sendEmail(given m: Email): Unit =
  println(s"Sent an email to $m")

case class User(name: String, email: Option[Email])

@main def Test =
  val user = User("Tom", Some(Email("tom@gmail.com")))
  user match
    case User(_, Some(given email: Email)) =&gt; sendEmail
</code></pre> 
    <h2><a href="#replace-given-matches-by-a-library-method" id="replace-given-matches-by-a-library-method" class="anchor"></a>Replace given matches by a library method</h2> 
    <p>Given matches was a feature that allowed to query the implicit scope and execute different logic based on what was found there. We have replaced this feature with a library method called <code>summonFrom</code>. You can use it as follows:</p> 
    <pre><code class="language-scala">import compiletime.summonFrom

given Int = 10

@main inline def Test = summonFrom {
  case str: String =&gt; println(s"String $str")
  case int: Int =&gt; println(s"Int $int")  // Int 10
}
</code></pre> 
    <p>The above code will print "Int 10" since an integer with the value 10 was present in the implicit scope but no String was present.</p> 
    <p>Notice that we had to define the <code>Test</code> method as <code>inline</code> since <code>summonFrom</code> can only be used from an inline method.</p> 
    <h2><a href="#wildcard-types-written-with-" id="wildcard-types-written-with-" class="anchor"></a>Wildcard types written with <code>?</code></h2> 
    <p>You can now use both <code>_</code> and <code>?</code> to express wildcard types. For example:</p> 
    <pre><code class="language-scala">@main def Test =
  val xs: List[Int] = (1 to 10).toList
  xs match
    case xss: List[?] =&gt; println(s"It is a list")
</code></pre> 
    <p>This is the first step in a multi-step process to disallow <code>_</code> as wildcards so that we can use underscores for both terms and type parameters instead. This will make the language more regular.</p> 
    <h2><a href="#lambda-parameters-must-be-enclosed-in-parentheses" id="lambda-parameters-must-be-enclosed-in-parentheses" class="anchor"></a>Lambda parameters must be enclosed in parentheses</h2> 
    <p>Lambda parameters with type ascriptions are now required to be enclosed in parentheses. E.g. <code>x: Int =&gt; x * x</code> is no longer legal, it must be written as <code>(x: Int) =&gt; x * x</code>. However, you can still write <code>x =&gt; x * x</code>, that is, if <code>x</code> does not have an explicit type ascription.</p> 
    <h2><a href="#dottydoc-redesign" id="dottydoc-redesign" class="anchor"></a>Dottydoc redesign</h2> 
    <p>The output of <a href="https://dotty.epfl.ch/docs/usage/dottydoc.html">Dottydoc</a> has been redesigned. It is now fully responsive: every element, including API docs and search, is adapted to both small and big screens.</p> 
    <p>The most visible changes are the toolbar and the sidebar. They now have a common darker background, which makes them more readable and helps separating navigation from content. Also, the sidebar is collapsible and has been optimized so that it doesn't glitch when the page loads.</p> 
    <p>The toolbar's logo can now be set with the <code>-project-logo</code> option. For instance, <code>-project-logo dotty-logo.svg</code> will make <code>/images/dotty-logo.svg</code> appear in the toolbar.</p> 
    <p><a href="https://dotty.epfl.ch">The front page</a> has been redesigned too, with a new responsive menu and improved contrast.</p> 
    <p>Overall, every page has been updated with consistent settings of fonts and colors. A more detailed comparison between the new and the old design can be found <a href="https://github.com/lampepfl/dotty/pull/7153">here</a>.</p> 
    <h2><a href="#metaprogramming-progress" id="metaprogramming-progress" class="anchor"></a>Metaprogramming Progress</h2> 
    <p>We're making steady progress on the Dotty metaprogramming capability. In our previous work, we've implemented a bunch of functions for working with expressions. For example, we have a capability to convert a list of expressions into an expression of list, or a tuple of expressions into an expression of tuple.</p> 
    <p>In this release, we have collected this family of functions in one place – the companion object <code>scala.quoted.Expr</code>. Currently, the following methods are available in that object for working with expressions:</p> 
    <ul> 
     <li>nullExpr – an expression of <code>null</code>.</li> 
     <li>unitExpr – an expression of <code>unit</code>.</li> 
     <li>block – given a list of statements and a final expression, concatenates them in a block.</li> 
     <li>ofSeq, ofList – constructs an expression of collection from a collection of expressions</li> 
     <li>ofTuple – constructs an expression of tuple from either a tuple of expressions or a sequence of expressions.</li> 
    </ul> 
    <p>Also, <code>x.toExpr</code> syntax which lifts <code>x</code> into an expression is now deprecated. It is replaced with <code>Expr(x)</code>.</p> 
    <h1><a href="#let-us-know-what-you-think" id="let-us-know-what-you-think" class="anchor"></a>Let us know what you think!</h1> 
    <p>If you have questions or any sort of feedback, feel free to send us a message on our <a href="https://gitter.im/lampepfl/dotty">Gitter channel</a>. If you encounter a bug, please <a href="https://github.com/lampepfl/dotty/issues/new">open an issue on GitHub</a>.</p> 
    <h2><a href="#contributing" id="contributing" class="anchor"></a>Contributing</h2> 
    <p>Thank you to all the contributors who made this release possible!</p> 
    <p>According to <code>git shortlog -sn --no-merges 0.18.1-RC1..0.19.0-RC1</code> these are:</p> 
    <pre><code>    87  Martin Odersky
    50  Nicolas Stucki
    42  Guillaume R
    33  Nikita Eshkeev
    20  Guillaume Martres
     9  Liu Fengyun
     8  Anatolii
     5  Robert Stoll
     3  Miles Sabin
     1  Sam Desborough
     1  Anatolii Kmetiuk
     1  Jon Pretty
     1  Oron Port
     1  Aggelos Biboudis
</code></pre> 
    <p>If you want to get your hands dirty and contribute to Dotty, now is a good time to get involved! Head to our <a href="https://dotty.epfl.ch/docs/contributing/getting-started.html">Getting Started page for new contributors</a>, and have a look at some of the <a href="https://github.com/lampepfl/dotty/issues?q=is%3Aissue+is%3Aopen+label%3Aexp%3Anovice">good first issues</a>. They make perfect entry points into hacking on the compiler.</p> 
    <p>We are looking forward to having you join the team of contributors.</p> 
    <h2><a href="#library-authors-join-our-community-build" id="library-authors-join-our-community-build" class="anchor"></a>Library authors: Join our community build</h2> 
    <p>Dotty now has a set of widely-used community libraries that are built against every nightly Dotty snapshot. Currently, this includes ScalaPB, algebra, scalatest, scopt and squants. Join our <a href="https://github.com/lampepfl/dotty-community-build">community build</a> to make sure that our regression suite includes your library.</p> 
    <hr> 
    <footer> 
     <img id="author-img" src="images/anatolii.png"> <span id="author-signature"> Anatolii Kmetiuk </span> 
    </footer> 
   </main> 
  </div> 
  <script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'lampepfl/dotty'
  };
</script> 
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
 </body>
</html>  </div>
</main><footer><span class="go-to-top-icon"><a href="#container"><span class="icon-vertical_align_top"></span>&nbsp;Back to top</a></span>Generated by&nbsp;<a href="https://github.com/lampepfl/dotty/tree/master/scala3doc"><img src="../../images/scala3doc_logo.svg" alt="Scala3doc" class="scala3doc_logo"></img></a></footer></div></div><script type="text/javascript" src="../../scripts/pages.js"></script><script type="text/javascript" src="../../scripts/main.js"></script></body></html>
